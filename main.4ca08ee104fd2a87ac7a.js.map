{"version":3,"sources":["webpack:///./templates/card.hbs","webpack:///./scripts/fetch-service.js","webpack:///./scripts/main.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","FetchService","this","search","pageNumber","run","query","fetch","response","json","articles","hits","incrementPage","refs","searchForm","document","querySelector","loadMoreBtn","ul","fetchService","onLoadImgs","imgs","querySelectorAll","length","dist","counter","i","addEventListener","pos","elem","box","getBoundingClientRect","top","pageYOffset","window","scrollTo","left","behavior","e","preventDefault","currentTarget","elements","value","then","string","map","compiledTemplate","join","innerHTML","disabled","catch","error","console","log","children","classList","remove","insertAdjacentHTML","add"],"mappings":"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","file":"main.4ca08ee104fd2a87ac7a.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n        <div class=\\\"photo-card\\\">\\r\\n          <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":20},\"end\":{\"line\":3,\"column\":36}}}) : helper)))\n    + \"\\\" width=\\\"320\\\" alt=\\\"\\\" />\\r\\n          <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n              <i class=\\\"material-icons\\\">thumb_up</i>&nbsp;\\r\\n              \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":14},\"end\":{\"line\":7,\"column\":23}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n              <i class=\\\"material-icons\\\">visibility</i>&nbsp;\\r\\n              \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":14},\"end\":{\"line\":11,\"column\":23}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n              <i class=\\\"material-icons\\\">comment</i>&nbsp;\\r\\n              \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":14},\"end\":{\"line\":15,\"column\":26}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n              <i class=\\\"material-icons\\\">cloud_download</i>&nbsp;\\r\\n              \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":14},\"end\":{\"line\":19,\"column\":27}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </li>\";\n},\"useData\":true});","export default class FetchService {\r\n  constructor() {\r\n    this.search = '';\r\n    this.pageNumber = 1;\r\n  }\r\n  async run() {\r\n    try {\r\n      const query = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${this.search}&page=${this.pageNumber}&per_page=12&key=18927781-76591304de9a35a1d49e108a5`;\r\n      const response = await fetch(query);\r\n\r\n      const json = await response.json();\r\n      const articles = json.hits;\r\n      return articles;\r\n    } catch (error) {\r\n      //   console.log(error);\r\n      throw error;\r\n    }\r\n  }\r\n  incrementPage() {\r\n    this.pageNumber += 1;\r\n  }\r\n}\r\n","import compiledTemplate from '../templates/card.hbs';\r\nimport FetchService from '../scripts/fetch-service';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('.js-search-form'),\r\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\r\n  ul: document.querySelector('.gallery'),\r\n};\r\nconst fetchService = new FetchService();\r\n\r\nrefs.searchForm.addEventListener('submit', e => {\r\n  e.preventDefault();\r\n  fetchService.pageNumber = 1;\r\n  fetchService.search = e.currentTarget.elements.query.value;\r\n  fetchService\r\n    .run()\r\n    .then(data => {\r\n      const string = data.map(compiledTemplate).join('');\r\n      refs.ul.innerHTML = string;\r\n      refs.loadMoreBtn.disabled = false;\r\n      onLoadImgs();\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n});\r\n//--\r\nrefs.loadMoreBtn.addEventListener('click', () => {\r\n  refs.loadMoreBtn.disabled = true;\r\n  refs.loadMoreBtn.children[0].classList.remove('is-hidden');\r\n  fetchService.incrementPage();\r\n  fetchService\r\n    .run()\r\n    .then(data => {\r\n      const string = data.map(compiledTemplate).join('');\r\n      refs.ul.insertAdjacentHTML('beforeend', string);\r\n      refs.loadMoreBtn.children[0].classList.add('is-hidden');\r\n      refs.loadMoreBtn.disabled = false;\r\n      //--\r\n      onLoadImgs();\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n});\r\n//--\r\nfunction onLoadImgs() {\r\n  let imgs = document.querySelectorAll('img');\r\n  if (!imgs.length) return;\r\n  let dist = imgs.length - 12;\r\n  let counter = 0;\r\n  for (let i = dist; imgs.length > i; i += 1) {\r\n    imgs[i].addEventListener('load', () => {\r\n      counter += 1;\r\n      if (counter == 12) {\r\n        scrollTo(getCoords(imgs[dist]).top);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction scrollTo(pos) {\r\n  window.scrollTo({\r\n    top: pos,\r\n    left: 0,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\n\r\nfunction getCoords(elem) {\r\n  let box = elem.getBoundingClientRect();\r\n  return {\r\n    top: box.top + pageYOffset,\r\n  };\r\n}\r\n"],"sourceRoot":""}